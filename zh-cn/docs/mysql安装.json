{
  "filename": "mysql安装.md",
  "__html": "<h3 id=\"mysql%E5%AE%89%E8%A3%85\">MySQL安装 <a class=\"header-anchor\" href=\"#mysql%E5%AE%89%E8%A3%85\">#</a></h3>\n<h4 id=\"%E6%99%AE%E9%80%9A%E5%AE%89%E8%A3%85\">普通安装 <a class=\"header-anchor\" href=\"#%E6%99%AE%E9%80%9A%E5%AE%89%E8%A3%85\">#</a></h4>\n<p><a href=\"https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/\">https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/</a></p>\n<pre><code class=\"language-bash\">shell&gt; sudo grep <span class=\"hljs-string\">'temporary password'</span> /var/<span class=\"hljs-built_in\">log</span>/mysqld.log\nshell&gt; mysql -uroot -p\nmysql&gt; ALTER USER <span class=\"hljs-string\">'root'</span>@<span class=\"hljs-string\">'localhost'</span> IDENTIFIED BY <span class=\"hljs-string\">'Btn@20210218'</span>;\n\n</code></pre>\n<pre><code class=\"language-bash\"> yum install -y vim \n rpm  -Uvh mysql57-community-release-el7-10.noarch.rpm\n \n yum install mysql-community-client  <span class=\"hljs-comment\">#安装客户端 （每台需要访问数据库的电脑上）</span>\n yum install mysql-community-server  <span class=\"hljs-comment\">#安装服务端 （只需安装一台mysql服务器）</span>\n</code></pre>\n<pre><code class=\"language-sql\"><span class=\"hljs-comment\">#数据库备份用户</span>\n<span class=\"hljs-keyword\">GRANT</span>  <span class=\"hljs-keyword\">SELECT</span>,<span class=\"hljs-keyword\">LOCK</span> <span class=\"hljs-keyword\">TABLES</span>,<span class=\"hljs-keyword\">SHOW</span> <span class=\"hljs-keyword\">VIEW</span>,<span class=\"hljs-keyword\">TRIGGER</span> <span class=\"hljs-keyword\">ON</span> octopusscheduler.* <span class=\"hljs-keyword\">TO</span> <span class=\"hljs-string\">'octopus_backup'</span>@<span class=\"hljs-string\">'localhost'</span> <span class=\"hljs-keyword\">IDENTIFIED</span> <span class=\"hljs-keyword\">BY</span> <span class=\"hljs-string\">'Bk@123456'</span>;\n\n<span class=\"hljs-keyword\">GRANT</span>  RELOAD,<span class=\"hljs-keyword\">REPLICATION</span> <span class=\"hljs-keyword\">CLIENT</span> <span class=\"hljs-keyword\">ON</span> *.* <span class=\"hljs-keyword\">TO</span> <span class=\"hljs-string\">'octopusscheduler'</span>@<span class=\"hljs-string\">'localhost'</span> <span class=\"hljs-keyword\">IDENTIFIED</span> <span class=\"hljs-keyword\">BY</span> <span class=\"hljs-string\">'Bk@123456'</span>;\n\n<span class=\"hljs-keyword\">GRANT</span> PROCESS <span class=\"hljs-keyword\">ON</span> *.* <span class=\"hljs-keyword\">to</span> <span class=\"hljs-string\">'octopus_backup'</span>@<span class=\"hljs-string\">'localhost'</span>;\n</code></pre>\n<h4 id=\"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD\">数据库备份 <a class=\"header-anchor\" href=\"#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD\">#</a></h4>\n<p>配置</p>\n<pre><code class=\"language-bash\">cat /etc/my_dump.cnf\n\n[mysqldump]\nuser=octopus_backup\npassword=Bk@123456\n</code></pre>\n<p>备份命令</p>\n<pre><code class=\"language-bash\">mkdir -p /home/octopus/backup/mysql\ncat /home/octopus/backup/mysql_backup.sh\n\n<span class=\"hljs-meta\">#!/bin/bash</span>\nattime=`date +%Y%m%d%H%M`\nbackupFileName=<span class=\"hljs-string\">\"/home/octopus/backup/mysql/backup_<span class=\"hljs-variable\">$attime</span>.sql\"</span>\nbackupTgzFileName=<span class=\"hljs-string\">\"/home/octopus/backup/mysql/backup_<span class=\"hljs-variable\">$attime</span>.sql.tar.gz\"</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$backupFileName</span>\"</span>\nmysqldump --defaults-file=<span class=\"hljs-string\">\"/etc/my_dump.cnf\"</span>  --databases octopusscheduler  &gt; <span class=\"hljs-variable\">$backupFileName</span>\ntar czvf <span class=\"hljs-variable\">$backupTgzFileName</span>  <span class=\"hljs-variable\">$backupFileName</span>\nrm -f <span class=\"hljs-variable\">$backupFileName</span>\n<span class=\"hljs-built_in\">exit</span> 0\n</code></pre>\n<p>添加到cron里</p>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\">#每天中午11:30执行数据库备份</span>\ncrontab -l\n30 11 * * * /home/octopus/backup/mysql_backup.sh\n</code></pre>\n<p>通过光盘安装</p>\n<pre><code class=\"language-bash\">mount /dev/cdrom  /mnt\nvi /etc/yum.repos.d/CentOS-Media.repo\n<span class=\"hljs-comment\">## 修改后的内容 </span>\n[c7-media]\nname=CentOS-<span class=\"hljs-variable\">$releasever</span> - Media\nbaseurl=file:///mnt/\ngpgcheck=0\nenabled=1\n<span class=\"hljs-comment\">##</span>\n\nyum --disablerepo=\\* --enablerepo=c7-media  install gcc\nyum --disablerepo=\\* --enablerepo=c7-media  install mariadb\nyum --disablerepo=\\* --enablerepo=c7-media  install mariadb-server\n\nsystemctl start mariadb\nmysql_secure_installation\n数据库用户和密码： root / ZD@123456\n\n mysql -uroot -h localhost -p\n \n \n \n</code></pre>\n<h5 id=\"docker%E5%AE%89%E8%A3%85\">Docker安装 <a class=\"header-anchor\" href=\"#docker%E5%AE%89%E8%A3%85\">#</a></h5>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># 通过本地的docker获取mysql镜像</span>\ndocker pull mysql:5.7\n<span class=\"hljs-comment\">#  保存成镜像包</span>\ndocker save -o mysql.tar mysql:5.7\n<span class=\"hljs-comment\"># 启动</span>\ndocker run -itd --name mysql-idp  -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 mysql\n\n\n<span class=\"hljs-comment\"># 进入容器</span>\ndocker <span class=\"hljs-built_in\">exec</span> -it mysql bash\n\n\n<span class=\"hljs-comment\"># 参考： https://www.runoob.com/docker/docker-install-mysql.html</span>\n</code></pre>\n<h5 id=\"%E5%AF%BC%E5%87%BA%E8%A1%A8%E7%BB%93%E6%9E%84%E5%92%8C%E6%95%B0%E6%8D%AE\">导出表结构和数据 <a class=\"header-anchor\" href=\"#%E5%AF%BC%E5%87%BA%E8%A1%A8%E7%BB%93%E6%9E%84%E5%92%8C%E6%95%B0%E6%8D%AE\">#</a></h5>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># 导出整个数据库结构和数据</span>\nmysqldump -h localhost -uroot -p123456 database &gt; dump.sql \n\n<span class=\"hljs-comment\">#导出单个数据表结构和数据</span>\nmysqldump -h localhost -uroot -p123456  database table &gt; dump.sql\n\n<span class=\"hljs-comment\">#导出整个数据库结构（不包含数据）</span>\nmysqldump -h localhost -uroot -p123456  -d database &gt; dump.sql\n\n<span class=\"hljs-comment\">#导出单个数据表结构（不包含数据）</span>\nmysqldump -h localhost -uroot -p123456  -d database table &gt; dump.sql\n</code></pre>\n",
  "link": "\\zh-cn\\docs\\mysql安装.html",
  "meta": {}
}